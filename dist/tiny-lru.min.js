/*!
 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 11.0.0
*/
function t(t,s){return s in t}class s{constructor(t=0,s=0,e=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=e,this.size=0,this.ttl=s}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(s){if(t(this.items,s)){const t=this.items[s];delete this.items[s],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}evict(t=!1){if(t||this.size>0){const t=this.first;delete this.items[t.key],0==--this.size?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(s){let e;return t(this.items,s)&&(e=this.items[s].expiry),e}get(s){let e;if(t(this.items,s)){const t=this.items[s];this.ttl>0&&t.expiry<=Date.now()?this.delete(s):(e=t.value,this.set(s,e,!0))}return e}keys(){return Object.keys(this.items)}set(s,e,i=!1,l=this.resetTtl){let h;if(i||t(this.items,s)){if(h=this.items[s],h.value=e,l&&(h.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==h){const t=this.last,s=h.next,e=h.prev;this.first===h&&(this.first=h.next),h.next=null,h.prev=this.last,t.next=h,null!==e&&(e.next=s),null!==s&&(s.prev=e)}}else this.max>0&&this.size===this.max&&this.evict(!0),h=this.items[s]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:s,prev:this.last,next:null,value:e},1==++this.size?this.first=h:this.last.next=h;return this.last=h,this}}function e(t=1e3,e=0,i=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if("boolean"!=typeof i)throw new TypeError("Invalid resetTtl value");return new s(t,e,i)}export{e as lru};//# sourceMappingURL=tiny-lru.min.js.map
