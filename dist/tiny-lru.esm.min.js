/*!
 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 10.3.0
*/
class t{constructor(t=0,s=0,e=!1){this.first=null,this.items=new Map,this.last=null,this.max=t,this.resetTtl=e,this.ttl=s}clear(){return this.first=null,this.items=new Map,this.last=null,this}delete(t){if(this.items.has(t)){const s=this.items.get(t);this.items.delete(t),null!==s.prev&&(s.prev.next=s.next),null!==s.next&&(s.next.prev=s.prev),this.first===s&&(this.first=s.next),this.last===s&&(this.last=s.prev)}return this}evict(t=!1){if(t||this.size>0){const t=this.first;this.items.delete(t.key),0===this.size?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}get(t){let s;if(this.items.has(t)){const e=this.items.get(t);this.ttl>0&&e.expiry<=Date.now()?this.delete(t):(s=e.value,this.set(t,s,!0))}return s}expiresAt(t){let s;return this.items.has(t)&&(s=this.items.get(t).expiry),s}keys(){return this.items.keys()}set(t,s,e=!1,i=this.resetTtl){let l;if(e||this.items.has(t)){if(l=this.items.get(t),l.value=s,i&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==l){const t=this.last,s=l.next,e=l.prev;this.first===l&&(this.first=l.next),l.next=null,l.prev=this.last,t.next=l,null!==e&&(e.next=s),null!==s&&(s.prev=e)}}else this.max>0&&this.size===this.max&&this.evict(!0),l={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:s},this.items.set(t,l),1===this.size?this.first=l:this.last.next=l;return this.last=l,this}get size(){return this.items.size}}function s(s=1e3,e=0,i=!1){if(isNaN(s)||s<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if("boolean"!=typeof i)throw new TypeError("Invalid resetTtl value");return new t(s,e,i)}export{s as lru};//# sourceMappingURL=tiny-lru.esm.min.js.map
